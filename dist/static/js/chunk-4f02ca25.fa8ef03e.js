(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-4f02ca25"],{7931:function(e,t,r){"use strict";r.r(t);var i=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"app-container"},[r("div",{staticClass:"flex-box"},[r("div",{staticClass:"item"},[r("el-input",{attrs:{placeholder:"输入关键字搜索"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}})],1)]),r("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.listLoading,expression:"listLoading"}],ref:"filterTable",attrs:{data:e.list.filter((function(t){return!e.search||t.gnuserId.toLowerCase().includes(e.search.toLowerCase())||t.userName.toLowerCase().includes(e.search.toLowerCase())||t.inviteCode.toLowerCase().includes(e.search.toLowerCase())||t.creditLimit.toLowerCase().includes(e.search.toLowerCase())||t.turnoverRebate.toLowerCase().includes(e.search.toLowerCase())||t.userType.toLowerCase().includes(e.search.toLowerCase())})),"element-loading-text":"Loading",border:"",fit:"","highlight-current-row":"","default-sort":{prop:"gnuserId",order:"descending"}}},[r("el-table-column",{attrs:{label:"会员 ID",align:"center",sortable:"",prop:"gnuserId","sort-by":"gnuserId"}}),r("el-table-column",{attrs:{label:"会员名",align:"center",sortable:"",prop:"userName"}}),r("el-table-column",{attrs:{label:"邀请码",align:"center",sortable:"",prop:"inviteCode","sort-by":"inviteCode"}}),r("el-table-column",{attrs:{"class-name":"status-col",label:"信用额度",align:"center",sortable:"",prop:"creditLimit","sort-by":"creditLimit"}}),r("el-table-column",{attrs:{"class-name":"status-col",label:"流水佣金%",align:"center",sortable:"",prop:"turnoverRebate","sort-by":"turnoverRebate"}}),r("el-table-column",{attrs:{"class-name":"status-col",label:"盈利佣金%",align:"center",sortable:"",prop:"profitRebate","sort-by":"profitRebate"}}),r("el-table-column",{attrs:{"class-name":"status-col",label:"类型",align:"center",sortable:"",prop:"userType","sort-by":"userType"}}),r("el-table-column",{attrs:{align:"center",label:"操作","min-width":"200px",fixed:"right"},scopedSlots:e._u([{key:"default",fn:function(t){return[r("el-button",{attrs:{type:"primary",icon:"el-icon-edit",circle:"",disabled:"N"!==t.row.robotInd},on:{click:function(r){return e.openEdit(t.row.gnuserId)}}}),r("el-button",{attrs:{type:"primary",icon:"el-icon-top",circle:"",disabled:"N"!==t.row.cashInd},on:{click:function(r){return e.openAddCredit(t.row.gnuserId)}}}),r("el-button",{attrs:{type:"danger",icon:"el-icon-bottom",circle:"",disabled:"N"!==t.row.cashInd},on:{click:function(r){return e.openMinusCredit(t.row.gnuserId)}}})]}}])})],1),r("el-dialog",{attrs:{title:"修改 Edit",visible:e.dialogFormVisible},on:{"update:visible":function(t){e.dialogFormVisible=t},close:e.closeEdit}},[r("el-form",{attrs:{model:e.currentMember}},[r("el-form-item",{attrs:{label:"流水佣金 %","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentMember.turnoverRebate,callback:function(t){e.$set(e.currentMember,"turnoverRebate",t)},expression:"currentMember.turnoverRebate"}})],1),r("el-form-item",{attrs:{label:"盈利佣金 %","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.currentMember.profitRebate,callback:function(t){e.$set(e.currentMember,"profitRebate",t)},expression:"currentMember.profitRebate"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeEdit}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.editMember}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"加信用额度",visible:e.dialogFormVisibleAdd},on:{"update:visible":function(t){e.dialogFormVisibleAdd=t},close:e.closeAddCredit}},[r("el-form",{attrs:{model:e.currentMember}},[r("el-form-item",{attrs:{label:"加信用额度","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.credit,callback:function(t){e.credit=t},expression:"credit"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeAddCredit}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.addCredit}},[e._v("确 定")])],1)],1),r("el-dialog",{attrs:{title:"减信用额度",visible:e.dialogFormVisibleMinus},on:{"update:visible":function(t){e.dialogFormVisibleMinus=t},close:e.closeMinusCredit}},[r("el-form",{attrs:{model:e.currentMember}},[r("el-form-item",{attrs:{label:"减信用额度","label-width":e.formLabelWidth}},[r("el-input",{attrs:{autocomplete:"off"},model:{value:e.credit,callback:function(t){e.credit=t},expression:"credit"}})],1)],1),r("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[r("el-button",{on:{click:e.closeMinusCredit}},[e._v("取 消")]),r("el-button",{attrs:{type:"primary"},on:{click:e.minusCredit}},[e._v("确 定")])],1)],1)],1)},o=[],s=(r("4de4"),r("d3b7"),r("ac1f"),r("00b4"),r("b775"));function a(){return Object(s["a"])({url:"/WebC/api/Senior",method:"get"})}function l(e){return Object(s["a"])({url:"/WebC/api/UpdateSeniorRebate",method:"post",data:e})}function n(e){return Object(s["a"])({url:"/WebC/api/AddSeniorCredit",method:"post",data:e})}function c(e){return Object(s["a"])({url:"/WebC/api/MinusSeniorCredit",method:"post",data:e})}var d={name:"seniorMember",filters:{statusFilter:function(e){var t={published:"success",draft:"gray",deleted:"danger"};return t[e]}},data:function(){return{list:[],credit:"",currentMember:{},listLoading:!1,dialogFormVisible:!1,dialogFormVisibleAdd:!1,dialogFormVisibleMinus:!1,formLabelWidth:"120px",search:""}},created:function(){this.fetchData()},methods:{fetchData:function(){var e=this;this.listLoading=!0,a().then((function(t){console.log(t),e.list=t.data,e.listLoading=!1})).catch((function(t){e.listLoading=!1,console.log(t)}))},memberByID:function(e){var t;this.currentMember=null===(t=this.list.filter((function(t){return t.gnuserId===e})))||void 0===t?void 0:t[0]},openEdit:function(e){this.dialogFormVisible=!0,this.memberByID(e)},editMember:function(){var e=this;if(/^([0-9]{1,2}$)|(^[0-9]{1,2}\.[0-9]{1,2}$)|100$/.test(this.currentMember.turnoverRebate)&&/^([0-9]{1,2}$)|(^[0-9]{1,2}\.[0-9]{1,2}$)|100$/.test(this.currentMember.profitRebate)){var t=this.currentMember,r=t.gnuserId,i=t.turnoverRebate,o=t.profitRebate;l({gnuserId:r,turnoverRebate:i,profitRebate:o}).then((function(t){console.log(t),0==t.code?e.$message({type:"success",message:"编辑成功"}):e.$message({type:"error",message:"编辑失败"}),e.closeEdit()})).catch((function(e){console.log(e)}))}else this.$message({type:"info",message:"流水佣金与盈利佣金皆为0到100之间最多允许包含2位小数"})},closeEdit:function(){this.dialogFormVisible=!1,this.fetchData()},openAddCredit:function(e){this.dialogFormVisibleAdd=!0,this.memberByID(e)},addCredit:function(){var e=this,t=this.currentMember.gnuserId;n({gnuserId:t,credit:this.credit}).then((function(t){0==t.code?e.$message({type:"success",message:"增加信用成功"}):e.$message({type:"info",message:"增加信用失败"}),e.closeAddCredit()})).catch((function(e){console.log(e)}))},closeAddCredit:function(){this.dialogFormVisibleAdd=!1,this.credit="",this.fetchData()},openMinusCredit:function(e){this.dialogFormVisibleMinus=!0,this.memberByID(e)},minusCredit:function(){var e=this,t=this.currentMember.gnuserId;c({gnuserId:t,credit:this.credit}).then((function(t){e.closeMinusCredit(),0==t.code?e.$message({type:"success",message:"降低信用成功"}):e.$message({type:"info",message:"降低信用失败"}),e.fetchData()})).catch((function(e){console.log(e)}))},closeMinusCredit:function(){this.dialogFormVisibleMinus=!1,this.credit=""}}},u=d,b=(r("d6ae"),r("2877")),m=Object(b["a"])(u,i,o,!1,null,"716b9098",null);t["default"]=m.exports},d6ae:function(e,t,r){"use strict";r("f668")},f668:function(e,t,r){}}]);